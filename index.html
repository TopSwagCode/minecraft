<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<meta name="theme-color" content="#2563eb" />
	<link rel="manifest" href="manifest.webmanifest" />
	<link rel="apple-touch-icon" href="icons/apple-touch-icon.png" />
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png" />
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png" />
	<link rel="icon" type="image/png" sizes="192x192" href="icons/android-chrome-192x192.png" />
	<link rel="icon" type="image/png" sizes="512x512" href="icons/android-chrome-512x512.png" />
	<link rel="shortcut icon" href="icons/favicon.ico" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<title>Help-Motivate.Me</title>
	<link rel="stylesheet" href="style.css" />
</head>
<body>

	<!-- Loading Screen -->
	<div id="loadingScreen" class="loading-screen" aria-hidden="false">
		<div class="loading-inner">
			<div class="spinner-hex"></div>
			<div class="loading-text">Loading <span id="loadingPercent">0%</span></div>
			<div class="progress-bar"><div class="progress-fill" id="loadingBarFill"></div></div>
		</div>
	</div>

	<div id="startScreen" class="start-screen" aria-modal="true" role="dialog">
		<div class="start-panel">
			<h2>Help-Motivate.Me Game</h2>
			<div class="steps-header">
				<button type="button" class="step-pill active" data-step-pill="1">Players</button>
				<button type="button" class="step-pill" data-step-pill="2">Map</button>
			</div>
			<form id="playerSetupForm">
				<div id="stepPlayers" class="step-content active">
					<div class="players-grid">
						<div class="player-config" data-player="1">
							<h3><span class="player-name" data-player-name="1" contenteditable="true" role="textbox" aria-label="Player 1 name" spellcheck="false">Player 1</span></h3>
							<input type="hidden" name="p1Color" id="p1ColorValue" value="#3b82f6" />
							<div class="avatar-picker-label">Avatar</div>
							<div class="avatar-list" id="p1AvatarList"></div>
							<input type="hidden" name="p1Avatar" id="p1AvatarValue" />
						</div>
						<div class="player-config" data-player="2">
							<h3><span class="player-name" data-player-name="2" contenteditable="true" role="textbox" aria-label="Player 2 name" spellcheck="false">Player 2</span></h3>
							<input type="hidden" name="p2Color" id="p2ColorValue" value="#ef4444" />
							<div class="avatar-picker-label">Avatar</div>
							<div class="avatar-list" id="p2AvatarList"></div>
							<input type="hidden" name="p2Avatar" id="p2AvatarValue" />
						</div>
					</div>
					<div class="step-actions">
						<button type="button" id="toStep2Btn">Next →</button>
						<button type="submit" class="alt-start-btn" id="quickStartBtn">Start Now</button>
					</div>
				</div>
				<div id="stepMaps" class="step-content">
					<input type="hidden" name="selectedMap" id="selectedMapValue" />
					<div class="map-pagination-bar" aria-label="Map pagination controls">
						<button type="button" class="map-page-btn" id="mapPrevBtn" aria-label="Previous maps" disabled>←</button>
						<div class="map-page-indicator" id="mapPageIndicator">Page 1</div>
						<button type="button" class="map-page-btn" id="mapNextBtn" aria-label="Next maps">→</button>
					</div>
					<div class="map-grid" id="mapGrid"></div>
					<div id="mapEmptyHint" class="empty-hint" style="display:none;">No maps found</div>
					<div class="step-actions">
						<button type="button" id="backToStep1Btn">← Back</button>
						<button type="submit" id="startGameBtn">Start Game</button>
					</div>
				</div>
			</form>
		</div>
	</div>
	<main>
		<canvas id="board" width="900" height="700" aria-label="Hex board" role="img"></canvas>
	</main>
	<script type="module" src="textures.js"></script>
	<script type="module" src="src/game.js"></script>
	<script>
	if ('serviceWorker' in navigator) {
	  window.addEventListener('load', () => {
	    navigator.serviceWorker.register('./sw.js').catch(err => console.warn('SW registration failed', err));
	  });
	}
	</script>
</body>
</html>
